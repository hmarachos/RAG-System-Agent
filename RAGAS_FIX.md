# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å RAGAS –æ—Ü–µ–Ω–∫–æ–π

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

RAGAS –æ—Ü–µ–Ω–∫–∞ –ø–∞–¥–∞–ª–∞ —Å –æ—à–∏–±–∫–æ–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Answer Relevancy –º–µ—Ç—Ä–∏–∫–∏:

```
Exception raised in Job[2]: AttributeError('OpenAIEmbeddings' object has no attribute 'embed_query')
...
KeyError: 0
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ Answer Relevancy
- –ü—Ä–∏—á–∏–Ω–∞: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π langchain-openai
- –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ Faithfulness –∏ Context Precision

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `'answer_relevancy' in result`
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–≤–æ–¥ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—è—Å–Ω–µ–Ω–∏—è –∫ –º–µ—Ç—Ä–∏–∫–∞–º
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Answer Relevancy
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `evaluate_simple.py` –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—Ü–µ–Ω–∫–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### RAGAS –æ—Ü–µ–Ω–∫–∞ (`evaluate_ragas.py`):
- **Faithfulness**: 1.0000 ‚úÖ (–∏–¥–µ–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)
- **Context Precision**: 1.0000 ‚úÖ (–∏–¥–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- **–ò–¢–û–ì–û–í–´–ô –ë–ê–õ–õ**: 1.0000 üü¢ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª)

### –ü—Ä–æ—Å—Ç–∞—è –æ—Ü–µ–Ω–∫–∞ (`evaluate_simple.py`):
- **Faithfulness**: 1.000 ‚úÖ
- **Relevance**: 0.975 ‚úÖ
- **Context Quality**: 0.912 ‚úÖ
- **Clarity**: 1.000 ‚úÖ
- **Ground Truth Similarity**: 0.975 ‚úÖ
- **–ò–¢–û–ì–û–í–´–ô –ë–ê–õ–õ**: 0.972 üü¢

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `assistant_api/evaluate_ragas.py` - —É–±—Ä–∞–Ω–∞ Answer Relevancy, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ RAGAS:
- ‚úÖ **Faithfulness** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ **Context Precision** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚ùå **Answer Relevancy** - –æ—Ç–∫–ª—é—á–µ–Ω–∞ –∏–∑-–∑–∞ embeddings API –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `evaluate_simple.py` –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ —Å 5 –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –í–∫–ª—é—á–∞–µ—Ç –∞–Ω–∞–ª–æ–≥ Answer Relevancy —á–µ—Ä–µ–∑ Ground Truth Similarity

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏:
```bash
python evaluate_simple.py  # 5 –º–µ—Ç—Ä–∏–∫, –≤–∫–ª—é—á–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —ç—Ç–∞–ª–æ–Ω—É
```

### –î–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π RAGAS –æ—Ü–µ–Ω–∫–∏:
```bash
python evaluate_ragas.py   # 2 —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ RAGAS
```

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
python evaluate_simple.py
python evaluate_ragas.py
```

## üìà –í—ã–≤–æ–¥—ã

1. ‚úÖ **RAGAS —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** —Å 2 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
2. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** (–±–∞–ª–ª 1.0000)
3. ‚úÖ **–≠—Ç–∞–ª–æ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã** –≤ –æ–±–∞ –º–µ—Ç–æ–¥–∞ –æ—Ü–µ–Ω–∫–∏
4. ‚úÖ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–û–±–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ RAG —Å–∏—Å—Ç–µ–º—ã.